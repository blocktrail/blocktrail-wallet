<ion-view view-title="Receive" class="state-receive">
    <ion-nav-title class="">{{ 'RECEIVE' | translate }}</ion-nav-title>

    <ion-nav-buttons side="right">
        <button class="button button-outline"
                style="color: #fff;"
                nav-direction="forward"
                ui-sref="app.wallet.receive.address-lookup">{{ 'MY_ADDRESSES' | translate }}</button>
    </ion-nav-buttons>


    <ion-content scroll="true" has-bouncing="true">

        <div class="card">
            <form name="newRequestForm"  class="amount-input-section" ng-class="{'btc-first': !fiatFirst, 'fiat-first': fiatFirst}">
                <div class="input-group btc-input" ng-class="{'position-first': !fiatFirst, 'position-last': fiatFirst}">
                    <input type="{{ isSamsung && 'text' || 'number' }}" step="0.0001" name="btcValue" select-on-focus
                           ng-model="newRequest.btcValue"
                           raw-model="btcValueRaw"
                           ng-change="setFiat(); newRequestForm.fiatValue.$setDirty()"
                           ng-enter="blurInput($event)"
                           tabindex="{{ !fiatFirst && 1 || -1 }}"/>
                    <div class="label-group">
                        <span class="placeholder-label">{{ 'AMOUNT_PLACEHOLDER' | translate }}</span>
                        <span class="spacer">{{ btcValueRaw }}</span>
                        <span class="label" ng-class="{'opacity-30': newRequestForm.btcValue.$invalid}"
                        >
                            {{ CONFIG.NETWORKS[walletData.networkType].TICKER }}
                        </span>
                    </div>
                </div>
                <div class="input-group fiat-input" ng-class="{'position-first': fiatFirst, 'position-last': !fiatFirst}">
                    <input type="{{ isSamsung && 'text' || 'number' }}" step="0.01" name="fiatValue"
                           ng-model="newRequest.fiatValue"
                           raw-model="fiatValueRaw"
                           ng-change="setBTC(); newRequestForm.btcValue.$setDirty()"
                           ng-enter="blurInput($event)"
                           tabindex="{{ fiatFirst && 1 || -1 }}"/>
                    <div class="label-group">
                        <span class="placeholder-label">{{ 'AMOUNT_PLACEHOLDER' | translate }}</span>
                        <span class="label">{{ settingsData.localCurrency | toCurrencySymbol}}</span>
                        <span class="spacer">{{ fiatValueRaw }}</span>
                    </div>
                </div>

                <div class="input-swapping-overlay" ng-click="swapInputs()">
                    <i class="swap-icon ion-arrow-swap"></i>
                </div>

            </form>
        </div>
        <!-- /amount input -->
        <!-- /input section -->

        <div class="recipient-input-section padding-t card">
            <div class="help-text">
                <div class="text-muted">{{ 'ADDRESS_REUSE_NOTICE_1' | translate : { network: networkLong } }}</div>
                <div class="text-muted">{{ 'ADDRESS_REUSE_NOTICE_2' | translate }}</div>
                <div class="text-muted" ng-show="appControl.showCashOption">
                    {{ 'BITCOIN_CASH_ADDRESS_FORMAT_HELP_1' | translate }}

                    <span ng-show="appControl.useCashAddress">
                        <a ng-href="#" ng-click="appControl.useCashAddress=false" >
                            {{ 'BITCOIN_CASH_ADDRESS_FORMAT_HELP_LINK_OLD' | translate }}
                        </a>
                    </span>

                    <span ng-show="!appControl.useCashAddress">
                        <a ng-href="#" ng-click="appControl.useCashAddress=true" >
                            {{ 'BITCOIN_CASH_ADDRESS_FORMAT_HELP_LINK_NEW' | translate }}
                        </a>
                    </span>

                </div>
            </div>

            <div class="qrcode-display-section text-center">
                <qr ng-if="newRequest.bitcoinUri"
                    text="newRequest.bitcoinUri"
                    type-number="qrSettings.typeNumber"
                    correction-level="qrSettings.correctionLevel"
                    size="qrSettings.SIZE"
                    input-mode="qrSettings.inputMode"
                    image="qrSettings.image"
                    ng-click="toClipboard()">
                </qr>
                <br>
                <small class="address" ng-click="toClipboard()">{{ newRequest.address }}</small>

                <ion-spinner icon="dots" ng-if="!newRequest.address" class=""></ion-spinner>
            </div>
            <!-- /qr display -->

            <div class="row options" ng-if="!newRequest.recipientDisplay">
                <div class="col text-center">
                    <div class="option">
                        <a class="copy" ng-click="toClipboard()"><i class="icon ion-ios-copy"></i></a>
                        <span class="label">{{ 'COPY' | translate }}</span>
                    </div>
                </div>
                <div class="col text-center">
                    <div class="option">
                        <a class="sms" ng-click="shareLink()"><i class="icon ion-ios-chatbubble"></i></a>
                        <span class="label">{{ 'REQUEST_SEND' | translate }}</span>
                    </div>
                </div>
            </div>
            <!-- /send request options -->
        </div>
    </ion-content>

    <!--
    <div class="message-display" ng-class="{displayed: appControl.showMessage}" on-swipe-down="dismissMessage()">
        <h2 class="title">{{message.title}}</h2>
        <p class="body">{{message.body}}</p>

        <button class="button dismiss" ng-click="dismissMessage()">OK</button>
    </div>
    -->
    <!-- /message screen -->
</ion-view>
